webpackJsonp(["app/js/open-course-manage/base/index"],{"86a8d3a54811653afca1":function(e,t,a){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var n=a("7ab4a89ebadbfdecc2bf"),r=i(n),o=a("4602c3f5fe7ad9e3e91d"),s=i(o),l=function(){function e(){(0,r.default)(this,e),this.initSelect2(),this.initCkeditor(),this.initValidator(),this.initCategory()}return(0,s.default)(e,[{key:"initSelect2",value:function(){$("#course_tags").select2({ajax:{url:app.arguments.tagMatchUrl+"#",dataType:"json",quietMillis:100,data:function(e,t){return{q:e,page_limit:10}},results:function(e){var t=[];return $.each(e,function(e,a){t.push({id:a.name,name:a.name})}),{results:t}}},initSelection:function(e,t){var a=[];$(e.val().split(",")).each(function(){a.push({id:this,name:this})}),t(a)},formatSelection:function(e){return e.name},formatResult:function(e){return e.name},formatSearching:function(){return Translator.trans("open_course.load_search_hint")},width:"off",multiple:!0,maximumSelectionSize:20,placeholder:Translator.trans("open_course.tag_required_hint"),createSearchChoice:function(){return null}})}},{key:"initValidator",value:function(){var e=this,t=$("#course-form"),a=t.validate({currentDom:"#course-create-btn",ajax:!0,rules:{title:{required:!0,maxlength:60,trim:!0,course_title:!0},startTime:{required:!0,after_now:!0,es_remote:{type:"post",data:{clientTime:function(){return $("[name=startTime]").val()}}}},timeLength:{required:!0,positive_integer:!0,es_remote:{type:"get",data:{startTime:function(){return $("[name=startTime]").val()},length:function(){return $("[name=timeLength]").val()}}}}},messages:{startTime:{es_remote:Translator.trans("validate.after_now.message")}},submitSuccess:function(e){cd.message({type:"success",message:Translator.trans("site.save_success_hint")}),window.location.reload()}});if($("#course-create-btn").click(function(){a.form()&&($("#course-about-field").val(e.editor.getData()),t.submit())}),t.data("update"))$("[name=startTime]").attr("disabled",!1);else{$(".js-time-help-tip").html(Translator.trans("open_course.live_time_can_not_edit_bint")).addClass("color-danger"),$("[name=startTime]").attr("disabled",!0),$("#live-length-field").attr("disabled",!0)}var i=new Date;$("[name=startTime]").datetimepicker({autoclose:!0,language:document.documentElement.lang}).on("hide",function(e){a.element("[name=startTime]")}),$("[name=startTime]").datetimepicker("setStartDate",i)}},{key:"initCkeditor",value:function(){var e=this;$("#course-about-field").length>0&&(e.editor=CKEDITOR.replace("course-about-field",{allowedContent:!0,toolbar:"Detail",fileSingleSizeLimit:app.fileSingleSizeLimit,filebrowserImageUploadUrl:$("#course-about-field").data("imageUploadUrl")}))}},{key:"initCategory",value:function(){$('[data-role="tree-select"], [name="categoryId"]').select2({treeview:!0,dropdownAutoWidth:!0,treeviewInitState:"collapsed",placeholderOption:"first"})}}]),e}();t.default=l},"8feaa3cd455a19337f07":function(e,t,a){"use strict";var i=a("86a8d3a54811653afca1");new(function(e){return e&&e.__esModule?e:{default:e}}(i).default)($("#course-create-btn"))}},["8feaa3cd455a19337f07"]);