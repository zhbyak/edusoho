webpackJsonp(["app/js/settings/bind-mobile/index"],{0:function(e,a){e.exports=jQuery},"52418e6d64a8352a4a71":function(e,a,t){"use strict";function s(e){return e&&e.__esModule?e:{default:e}}var r=t("0282bb17fb83bfbfed9b"),n=s(r),d=t("b334fd7e4c5a19234db2"),i=s(d),o=t("bbc0ef257199acca9fed"),c=s(o),u=$("#bind-mobile-form"),l=$(".js-sms-send"),b=$("#drag-btn").length?new c.default($("#drag-btn"),$(".js-jigsaw"),{limitType:"web_register"}):null;u.validate({currentDom:"#submit-btn",ajax:!0,rules:{password:{required:!0,es_remote:{type:"post"}},mobile:{required:!0,phone:!0,es_remote:{type:"get",callback:function(e){e?l.removeAttr("disabled"):l.attr("disabled",!0)}}},sms_code:{required:!0,unsigned_integer:!0,es_remote:{type:"get"}}},messages:{sms_code:{required:Translator.trans("site.captcha_code.required")}},submitSuccess:function(e){(0,i.default)("success",Translator.trans(e.message)),$(".modal").modal("hide"),window.location.reload()},submitError:function(e){(0,i.default)("danger",Translator.trans(e.responseJSON.message))}}),b&&b.on("success",function(e){l.removeClass("disabled").attr("disabled",!1)}),l.on("click",function(){l.attr("disabled",!0),new n.default({element:".js-sms-send",url:l.data("url"),smsType:"sms_bind",captcha:!0,captchaValidated:!0,captchaNum:"dragCaptchaToken",preSmsSend:function(){return!0},error:function(e){b.initDragCaptcha()},additionalAction:function(e){return"captchaRequired"==e&&(l.attr("disabled",!0),$(".js-drag-jigsaw").removeClass("hidden"),b&&b.initDragCaptcha(),!0)}})})}},["52418e6d64a8352a4a71"]);