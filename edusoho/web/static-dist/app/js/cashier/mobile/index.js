webpackJsonp(["app/js/cashier/mobile/index"],{"0462758757283f323cc5":function(i,t,a){"use strict";function e(i){return i&&i.__esModule?i:{default:i}}Object.defineProperty(t,"__esModule",{value:!0});var n=a("7ab4a89ebadbfdecc2bf"),r=e(n),o=a("4602c3f5fe7ad9e3e91d"),c=e(o),s=function(){function i(t){(0,r.default)(this,i),this.$container=t.$coinContainer,this.cashierForm=t.cashierForm,this.$form=t.$form,this.priceType=this.$container.data("priceType"),this.coinRate=this.$container.data("coinRate"),this.maxCoinInput=this.$container.data("maxAllowCoin")>this.$container.data("coinBalance")?this.$container.data("coinBalance"):this.$container.data("maxAllowCoin"),this.init()}return(0,c.default)(i,[{key:"init",value:function(){this.initEvent()}},{key:"initEvent",value:function(){var i=this;this.$form.on("change",".js-coin-amount",function(t){return i.changeAmount(t)})}},{key:"changeAmount",value:function(i){var t=$(i.currentTarget),a=t.val();if(parseFloat(a)>parseFloat(this.maxCoinInput)&&(a=this.maxCoinInput),isNaN(parseFloat(a))||parseFloat(a)<=0)return a=0,t.val(""),this.removePasswordValidate(),this.$form.trigger("removePriceItem",["coin-price"]),void this.cashierForm.calcPayPrice(a);t.val(parseFloat(a).toFixed(2)),this.addPasswordValidate();var e=this.$form.data("coin-name"),n=0;if("coin"===this.priceType){n=parseFloat(a).toFixed(2)+" "+e;var r=parseFloat(this.$container.data("maxAllowCoin")),o=parseFloat(r-a).toFixed(2)+" "+e;this.$form.trigger("changeCoinPrice",[o])}else n="ï¿¥"+parseFloat(a/this.coinRate).toFixed(2);this.$form.trigger("addPriceItem",["coin-price",e+Translator.trans("order.create.minus"),n]),this.cashierForm.calcPayPrice(a)}},{key:"addPasswordValidate",value:function(){this.$container.find('[name="payPassword"]').rules("add","required es_remote")}},{key:"removePasswordValidate",value:function(){this.$container.find('[name="payPassword"]').rules("remove","required es_remote")}}]),i}();t.default=s},"36bca6d69b0cc121ff86":function(i,t,a){"use strict";function e(i){return i&&i.__esModule?i:{default:i}}var n=a("7ab4a89ebadbfdecc2bf"),r=e(n),o=a("4602c3f5fe7ad9e3e91d"),c=e(o),s=a("0462758757283f323cc5"),d=e(s);new(function(){function i(t){(0,r.default)(this,i),this.$container=t,this.validator=this.$container.validate(),this.initEvent(),this.initCoin()}return(0,c.default)(i,[{key:"initCoin",value:function(){var i=$("#coin-use-section");i.length>0&&(this.coin=new d.default(i,this))}},{key:"calcPayPrice",value:function(i){var t=this;$.post(this.$container.data("priceUrl"),{coinAmount:i},function(i){t.$container.find(".js-pay-price").text(i.data)})}},{key:"initEvent",value:function(){this.$container.on("click",".check",function(i){var t=$(i.currentTarget);t.hasClass("active")||t.hasClass("disabled")||(t.addClass("active").siblings().removeClass("active"),$("input[name='payment']").val(t.attr("id")))});var i=this.$container;i.on("click",".js-pay-btn",function(t){i.valid()&&i.submit()})}}]),i}())($("#cashier-form"))}},["36bca6d69b0cc121ff86"]);