webpackJsonp([1],{"0Y9P":function(t,e,s){"use strict";var i=s("Dd8w"),a=s.n(i),r=s("fZjL"),n=s.n(r),o=s("NYxO"),c={props:{course:{type:Object,default:function(){return{}}},type:{type:String,default:"price"},courseType:{type:String,default:"normal"},discount:{type:String,default:"10"},feedback:{type:Boolean,default:!0},typeList:{type:String,default:"course_list"},normalTagShow:{type:Boolean,default:!0},vipTagShow:{type:Boolean,default:!1},isVip:{type:String,default:"0"}},data:function(){return{pathName:this.$route.name}},computed:a()({},Object(o.mapState)(["vipSwitch","isLoading"]),{discountNum:function(){if("class_list"===this.typeList)return!1;if(""!==this.discount){var t=Number(this.discount);return 10!==t&&(0==t?"限免":t+"折")}}}),watch:{course:{handler:function(t){var e=t.courseSet;if("h5Setting"!==this.pathName&&e)for(var s=n()(e.cover),i=0;i<s.length;i++)e.cover[s[i]]=e.cover[s[i]].replace(/^(\/\/)|(http:\/\/)/,"https://")},immediate:!0}},methods:{onClick:function(t){if(this.feedback){var e="order"===this.type,s=this.course.id||this.course.targetId;"SPAN"!==t.target.tagName&&(e?location.href=this.order.targetUrl:this.$router.push({path:"course_list"===this.typeList?"/course/"+s:"/classroom/"+s}))}}}},l={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"e-course"},[s("div",{staticClass:"clearfix",on:{click:t.onClick}},[s("div",{staticClass:"e-course__left pull-left"},[s("img",{directives:[{name:"lazy",rawName:"v-lazy",value:t.course.imgSrc.url,expression:"course.imgSrc.url"}],class:t.course.imgSrc.className}),t._v(" "),t.normalTagShow?s("div",["live"===t.courseType?s("span",{staticClass:"tag tag-live"},[t._v("直播")]):t._e(),t._v(" "),t.discountNum?s("span",{staticClass:"tag tag-discount"},[t._v(t._s(t.discountNum))]):t._e()]):t._e(),t._v(" "),t.vipTagShow&&t.vipSwitch&&Number(t.isVip)?s("span",{staticClass:"tag tag-vip"},[t._v("会员免费")]):t._e()]),t._v(" "),s("div",{staticClass:"e-course__right pull-left"},[s("div",{staticClass:"e-course__header text-overflow"},[t._v(t._s(t.course.header))]),t._v(" "),s("div",{staticClass:"e-course__middle"},[t.course.middle.value?s("div",{domProps:{innerHTML:t._s(t.course.middle.html)}}):t._e()]),t._v(" "),s("div",{staticClass:"e-course__bottom",domProps:{innerHTML:t._s(t.course.bottom.html)}})])])])},staticRenderFns:[]},u=s("VU/8")(c,l,!1,null,null,null).exports,p={props:{courseList:{type:Object,default:{}},feedback:{type:Boolean,default:!0},index:{type:Number,default:-1},typeList:{type:String,default:"course_list"},normalTagShow:{type:Boolean,default:!0},vipTagShow:{type:Boolean,default:!1},moreType:{type:String,default:"normal"},vipName:{type:String,default:"会员"},levelId:{type:Number,default:1}},components:{"e-class":u},data:function(){return{type:"price",pathName:this.$route.name}},filters:{courseListData:function(t,e){switch(e.type){case"price":var s=e.showStudent?'<span class="switch-box__state"><p style="color: #B0BDC9">\n            '+t.studentNum+"人在学</p></span>":"",i="0.00"===t.price?'<p style="color: #408FFB">免费</p>':'<p style="color: #ff5353">¥ '+t.price+"</p>";return"classroom_list"===e.typeList?{id:t.id,targetId:t.targetId,imgSrc:{url:t.cover.middle||"",className:"e-class__img"},header:t.title,middle:{value:t.courseNum,html:'<div class="e-course__count">共 '+t.courseNum+" 门课程</div>"},bottom:{value:t.price||t.studentNum,html:'<span class="switch-box__price">'+i+'</span>\n                  <span class="switch-box__state"><p style="color: #B0BDC9">\n                    '+t.studentNum+"人在学</p>\n                  </span>"}}:{id:t.id,imgSrc:{url:t.courseSet.cover.middle||"",className:"e-course__img"},header:t.courseSetTitle,middle:{value:t.title,html:'<div class="e-course__project text-overflow">\n                  <span>'+t.title+"</span>\n                </div>"},bottom:{value:t.price||t.studentNum,html:'<span class="switch-box__price">'+i+"</span>"+s}};case"confirmOrder":return{imgSrc:{url:t.cover.middle||"",className:"e-course__img"},header:t.title,middle:"",bottom:{value:t.coinPayAmount,html:'<span class="switch-box__price">\n                  <p style="color: #ff5353">¥ '+t.coinPayAmount+"</p>\n                </span>"}};case"rank":return"classroom_list"===e.typeList?{id:t.id,targetId:t.targetId,imgSrc:{url:t.cover.middle||"",className:"e-class__img"},header:t.title,middle:"",bottom:{value:t.courseNum,html:'<div class="e-course__count">共 '+t.courseNum+" 门课程</div>"}}:{id:t.id,imgSrc:{url:t.courseSet.cover.middle||"",className:"course_list"===e.typeList?"e-course__img":"e-class__img"},header:t.courseSetTitle,middle:{value:t.title,html:'<div class="e-course__project text-overflow">\n                  <span>'+t.title+"</span>\n                </div>"},bottom:{value:t.progress.percent,html:'<div class="rank-box">\n                  <div class="progress round-conner">\n                    <div class="curRate round-conner"\n                      style="width:'+t.progress.percent+'%">\n                    </div>\n                  </div>\n                  <span>'+t.progress.percent+"%</span>\n                </div>"}};default:return"empty data"}}},computed:a()({},Object(o.mapState)(["courseSettings"]),{sourceType:{get:function(){return this.courseList.sourceType}},sort:{get:function(){return this.courseList.sort}},lastDays:{get:function(){return this.courseList.lastDays}},limit:{get:function(){return this.courseList.limit}},categoryId:{get:function(){return this.courseList.categoryId}},courseItemData:{get:function(){return!this.courseList.items.length},set:function(){}},listObj:function(){return{type:"price",typeList:this.typeList,showStudent:!this.courseSettings||Number(this.courseSettings.show_student_num_enabled)}}}),watch:{sort:function(t){this.fetchCourse()},limit:function(t,e){if(t<e){var s=this.courseList.items.slice(0,t);this.courseList.items=s}else this.fetchCourse()},lastDays:function(t){this.fetchCourse()},categoryId:function(t){this.fetchCourse()},sourceType:function(t,e){t!==e&&(this.courseList.items=[]),this.fetchCourse()}},created:function(){this.pathName.includes("Setting")&&this.fetchCourse()},methods:{jumpTo:function(t){this.feedback&&("vip"===this.moreType?this.$router.push({name:"course_list"===this.typeList?"vip_course":"vip_classroom",query:{vipName:this.vipName,levelId:this.levelId}}):this.$router.push({name:"course_list"===this.typeList?"more_course":"more_class"}))},fetchCourse:function(){if("custom"!==this.sourceType){var t={sort:this.sort,limit:this.limit,lastDays:this.lastDays,categoryId:this.categoryId};this.$emit("fetchCourse",{index:this.index,params:t,typeList:this.typeList})}}}},d={render:function(){var e=this,t=e.$createElement,s=e._self._c||t;return e.courseList.items.length?s("div",{staticClass:"e-course-list"},[s("div",{staticClass:"e-course-list__header"},[s("div",{staticClass:"clearfix"},[s("span",{staticClass:"e-course-list__list-title text-overflow"},[e._v(e._s(e.courseList.title))]),e._v(" "),s("span",{staticClass:"e-course-list__more"},[s("span",{staticClass:"more-text pull-left",on:{click:function(t){e.jumpTo(e.courseList.source)}}},[e._v("更多")])])])]),e._v(" "),s("div",{staticClass:"e-course-list__body"},e._l(e.courseList.items,function(t){return s("e-class",{key:t.id,attrs:{course:e._f("courseListData")(t,e.listObj),discount:"course_list"===e.typeList?t.courseSet.discount:"",courseType:"course_list"===e.typeList?t.courseSet.type:"",typeList:e.typeList,normalTagShow:e.normalTagShow,vipTagShow:e.vipTagShow,type:e.type,isVip:t.vipLevelId,feedback:e.feedback}})})),e._v(" "),s("div",{directives:[{name:"show",rawName:"v-show",value:e.courseItemData,expression:"courseItemData"}],staticClass:"e-course__empty"},[e._v("暂无"+e._s("course_list"===e.typeList?"课程":"班级"))])]):e._e()},staticRenderFns:[]},m=s("VU/8")(p,d,!1,null,null,null);e.a=m.exports},"7qms":function(t,e,s){"use strict";var i={props:{poster:{type:Object,default:{}},feedback:{type:Boolean,default:!0}},data:function(){return{link:this.poster.link}},computed:{linkUrl:function(){if(!("url"==this.poster.link.type&&this.feedback))return"javascripts;";var t=this.poster.link.url&&this.poster.link.url.trim();return t?/^(\/\/)|(http:\/\/)|(https:\/\/)/.exec(t)?t:"http://"+t:"javascripts:;"}},methods:{jumpTo:function(t){this.feedback&&("course"===t.type&&t.target?this.$router.push({path:"/course/"+t.target.id}):"classroom"===t.type&&t.target?this.$router.push({path:"/classroom/"+t.target.id}):"vip"!==t.type||this.$router.push({path:"/vip"}))}}},a={render:function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"e-poster"},["url"==e.poster.link.type&&e.feedback?s("a",{attrs:{href:e.linkUrl}},[s("img",{directives:[{name:"lazy",rawName:"v-lazy",value:e.poster.image.uri,expression:"poster.image.uri"}],staticClass:"e-poster__img"})]):s("img",{directives:[{name:"lazy",rawName:"v-lazy",value:e.poster.image.uri,expression:"poster.image.uri"}],staticClass:"e-poster__img",on:{click:function(t){e.jumpTo(e.link)}}})])},staticRenderFns:[]},r=s("VU/8")(i,a,!1,null,null,null);e.a=r.exports},Dd8w:function(t,e,s){"use strict";e.__esModule=!0;var i,a=s("woOf"),r=(i=a)&&i.__esModule?i:{default:i};e.default=r.default||function(t){for(var e=1;e<arguments.length;e++){var s=arguments[e];for(var i in s)Object.prototype.hasOwnProperty.call(s,i)&&(t[i]=s[i])}return t}},"LF/w":function(t,e,s){"use strict";var i=s("xPBg"),a={props:["item","num","feedback"],computed:{couponStatus:function(){if(!this.feedback)return"";var t=this.item.currentUserCoupon;return 0!=this.item.unreceivedNum||t?!t||"used"!==t.status&&"using"!==t.status?void 0:"coupon-used":"coupon-received-all"}},mixins:[{methods:{timeExpire:function(t,e){return t?(t=Object(i.formatFullTime)(new Date(t)))+" 至 "+(e=Object(i.formatFullTime)(new Date(e))):"有效期截止："+(e=Object(i.formatFullTime)(new Date(e)))},timeCalculation:function(t){var e=(new Date).setDate((new Date).getDate()+Number(t));return"有效期至："+(e=Object(i.formatFullTime)(new Date(e)))},priceHtml:function(t,e){var s=t.rate,i=t.type,a=!(1<arguments.length&&void 0!==e)||e,r=parseInt(s,10),n=3<r.toString().length?"text-16 ml-5":"",o=Number(s).toFixed(2).split(".")[1];o=0===Number(o)?"":"."+o;var c="discount"===i?"折":"元";return a?'<span class="'+n+'">'+r+'</span><span class="text-14">'+o+c+"</span>":r+o+c},scopeFilter:function(t){var e=t.targetDetail,s=e.numType,i=e.product,a="";if("single"===s)switch(i){case"course":case"classroom":a="指定商品";break;case"vip":a="指定会员";break;default:a=""}else if("all"===s)switch(i){case"course":a="全部课程";break;case"classroom":a="全部班级";break;case"all":a="全部商品";break;case"vip":a="全部会员";break;default:a=""}else switch(i){case"course":case"classroom":a="部分商品";break;default:a=""}return a},handleClick:function(t){this.$emit("buttonClick",t)},receiveTimeExpire:function(t){return t=Object(i.formatchinaTime)(new Date(t))}}}]},r={render:function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{class:["e-coupon__body",e.couponStatus]},[s("div",{staticClass:"e-coupon__header clearfix"},[s("span",{staticClass:"e-coupon__price",domProps:{innerHTML:e._s(e.priceHtml(e.item))}}),e._v(" "),s("div",{directives:[{name:"show",rawName:"v-show",value:1==e.num,expression:"num == 1"}],staticClass:"e-coupon__name"},[s("div",{staticClass:"text-overflow text-14 coupon-name"},[e._v(e._s(e.item.name))]),e._v(" "),e.item.deadlineMode&&"time"!==e.item.deadlineMode?e._e():s("span",{staticClass:"text-10"},[e._v(e._s(e.timeExpire(e.item.createdTime,e.item.deadline)))]),e._v(" "),"day"!==e.item.deadlineMode||e.item.currentUserCoupon?e._e():s("span",{staticClass:"text-10"},[e._v("领取后"+e._s(e.item.fixedDay)+"天内有效")]),e._v(" "),"day"===e.item.deadlineMode&&e.item.currentUserCoupon?s("span",{staticClass:"text-10"},[e._v(e._s(e.timeExpire(e.item.createdTime,e.item.currentUserCoupon.deadline)))]):e._e()]),e._v(" "),e.feedback?s("div",[0==e.item.unreceivedNum||e.item.currentUserCoupon?s("div",{staticClass:"stamp"}):e._e(),e._v(" "),s("span",{staticClass:"coupon-button",on:{click:function(t){e.handleClick(e.item)}}},[e._v(e._s(e.item.currentUserCoupon?"去使用":"领券"))])]):s("div",[s("span",{staticClass:"coupon-button"},[e._v("领券")])])]),e._v(" "),s("div",{staticClass:"e-coupon__middle"}),e._v(" "),s("div",{staticClass:"e-coupon__bottom text-overflow"},[e._v("\n    可用范围："+e._s(e.scopeFilter(e.item))+"\n  ")])])},staticRenderFns:[]},n={components:{item:s("VU/8")(a,r,!1,null,null,null).exports},props:{coupons:{type:Array,default:function(){return[]}},feedback:{type:Boolean,default:!0},showTitle:{type:String,default:"show"}},computed:{couponNum:function(){return 1<this.coupons.length?"e-coupon-multi":"e-coupon-single"}},methods:{handleClick:function(t){this.feedback&&this.$emit("couponHandle",t)}}},o={render:function(){var s=this,t=s.$createElement,i=s._self._c||t;return i("div",{staticClass:"e-coupon"},["show"===s.showTitle?i("div",{staticClass:"e-coupon__title"},[s._v("优惠券")]):s._e(),s._v(" "),i("div",{directives:[{name:"show",rawName:"v-show",value:s.coupons.length,expression:"coupons.length"}],class:["e-coupon__container","clearfix",s.couponNum]},[1<s.coupons.length?i("van-swipe",{attrs:{width:200,"show-indicators":!1,loop:!1,touchable:!0}},s._l(s.coupons,function(t,e){return i("van-swipe-item",{key:e},[i("item",{attrs:{item:t,num:s.coupons.length,feedback:s.feedback},on:{buttonClick:function(t){s.handleClick(t)}}})],1)})):s._l(s.coupons,function(t,e){return i("item",{key:e,attrs:{item:t,num:s.coupons.length,feedback:s.feedback},on:{buttonClick:function(t){s.handleClick(t)}}})})],2)])},staticRenderFns:[]},c=s("VU/8")(n,o,!1,null,null,null);e.a=c.exports},TmV0:function(t,e,s){s("fZOM"),t.exports=s("FeBl").Object.values},fZOM:function(t,e,s){var i=s("kM2E"),a=s("mbce")(!1);i(i.S,"Object",{values:function(t){return a(t)}})},gRE1:function(t,e,s){t.exports={default:s("TmV0"),__esModule:!0}},hQlr:function(t,e){},hfGT:function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=s("Dd8w"),a=s.n(i),r=s("NYxO"),n=s("gRE1"),o=s.n(n),c=s("l0Kp"),l=s("0Y9P"),u=s("7qms"),p={props:{slides:{type:Array,default:[]},feedback:{type:Boolean,default:!0}},methods:{jumpTo:function(t,e){if(this.feedback&&t){var s=t.link;"classroom"===s.type&&s.target?this.$router.push({path:"/classroom/"+s.target.id}):"vip"!==s.type?"course"===s.type&&s.target&&this.$router.push({path:"/course/"+s.target.id}):this.$router.push({path:"/vip"})}}}},d={render:function(){var i=this,t=i.$createElement,a=i._self._c||t;return a("div",{staticClass:"e-swipe"},[a("van-swipe",{attrs:{autoplay:2e3}},i._l(i.slides,function(e,s){return a("van-swipe-item",{key:s},[a("div",{staticClass:"item-container"},["url"!==e.link.type?a("div",{on:{click:function(t){i.jumpTo(e,s)}}},[a("img",{attrs:{src:e.image.uri}})]):a("a",{attrs:{href:e.link.url||"javascript:;"}},[a("img",{directives:[{name:"lazy",rawName:"v-lazy",value:e.image.uri,expression:"slide.image.uri"}]})]),i._v(" "),a("div",{staticClass:"text-overflow item-container__title"},[i._v(i._s(e.title))])])])}))],1)},staticRenderFns:[]},m=s("VU/8")(p,d,!1,null,null,null).exports,v=s("lAbm"),h=s("LF/w"),f=s("iIoD"),_={components:{"e-course-list":l.a,"e-swipe":m,"e-poster":u.a,"e-market-part":v.a,"e-coupon-list":h.a,"e-vip-list":f.a},props:{feedback:{type:Boolean,default:!0}},data:function(){return{parts:[],imageMode:["responsive","size-fit"],from:this.$route.query.from}},created:function(){var e=this;this.getDraft({portal:c.a[this.from],type:"discovery",mode:"draft"}).then(function(t){e.parts=o()(t)}).catch(function(t){})},methods:a()({},Object(r.mapActions)(["getDraft"]))},g={render:function(){var s=this,t=s.$createElement,i=s._self._c||t;return i("div",{staticClass:"find-page"},[s._l(s.parts,function(t,e){return i("div",{key:e,staticClass:"find-page__part"},["slide_show"==t.type?i("e-swipe",{attrs:{slides:t.data,feedback:s.feedback}}):s._e(),s._v(" "),["classroom_list","course_list"].includes(t.type)?i("e-course-list",{staticClass:"gray-border-bottom",attrs:{courseList:t.data,feedback:s.feedback,typeList:t.type}}):s._e(),s._v(" "),"poster"==t.type?i("e-poster",{class:s.imageMode[t.data.responsive],attrs:{poster:t.data,feedback:s.feedback}}):s._e(),s._v(" "),["groupon","cut","seckill"].includes(t.type)?i("e-market-part",{staticClass:"gray-border-bottom",attrs:{tag:t.data.tag,type:t.type,showTitle:t.data.titleShow,activity:t.data.activity}}):s._e(),s._v(" "),"coupon"==t.type?i("div",{staticClass:"coupon-preview__container gray-border-bottom"},[i("e-coupon-list",{attrs:{coupons:t.data.items,feedback:!0,showTitle:t.data.titleShow}})],1):s._e(),s._v(" "),"vip"==t.type?i("e-vip-list",{staticClass:"gray-border-bottom",attrs:{items:t.data.items,feedback:!0,sort:t.data.sort,showTitle:t.data.titleShow}}):s._e()],1)}),s._v(" "),i("div",{staticClass:"mt50"})],2)},staticRenderFns:[]},y={data:function(){return{qrcode:"",from:this.$route.query.from}},components:{mobilePreview:s("VU/8")(_,g,!1,null,null,null).exports},computed:a()({},Object(r.mapState)(["draft"]),{isMiniprogramSetting:function(){return"miniprogramSetting"===this.from}}),created:function(){var e=this,t=this.$route.query,s=t.preview,i=t.times,a=t.duration;this.isMiniprogramSetting||this.getQrcode({preview:s,times:i,duration:a,route:"homepage"}).then(function(t){e.qrcode=t.img}).catch(function(t){e.$message({message:t.message,type:"error"})})},methods:a()({},Object(r.mapActions)(["getQrcode","saveDraft"]),{edit:function(){this.$router.push({name:this.from,query:{draft:1}})},publish:function(){var e=this;this.saveDraft({data:this.draft,mode:"published",portal:c.a[this.from],type:"discovery"}).then(function(){e.$message({message:"发布成功",type:"success"}),e.$router.push({name:e.from})}).catch(function(t){e.$message({message:t.message||"发布失败，请重新尝试",type:"error"})})}})},b={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"preview-container"},[s("div",{staticClass:"image-container clearfix"},[s("div",{staticClass:"phone-img",class:{"phone-img-mp":t.isMiniprogramSetting}},[s("img",{attrs:{src:"static/images/phone_shell.png"}}),t._v(" "),s("mobile-preview",{staticClass:"preview-iframe",attrs:{feedback:!1}})],1),t._v(" "),s("div",{staticClass:"code-container",class:{"code-container-mp":t.isMiniprogramSetting}},[t.isMiniprogramSetting?t._e():s("div",{staticClass:"code-item"},[s("div",{staticClass:"code-img-container"},[s("img",{staticClass:"code-image",attrs:{src:t.qrcode}})]),t._v(" "),t._m(0)]),t._v(" "),s("el-button",{staticClass:"mrs btn-border-primary btn-common",on:{click:t.edit}},[t._v("返回编辑")]),t._v(" "),s("el-button",{staticClass:"btn-common btn-primary",on:{click:t.publish}},[t._v("发布")])],1)])])},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"help-text"},[this._v("扫描二维码在手机端预览"),e("div",[this._v("二维码60分钟内首次扫描有效")])])}]},w=s("VU/8")(y,b,!1,null,null,null);e.default=w.exports},iIoD:function(t,e,s){"use strict";var i={name:"e-vip-item",props:{item:{type:Object,default:function(){return{}}},feedback:{type:Boolean,default:!0}},methods:{handleClick:function(){this.feedback&&this.$router.push({path:"/vip",query:{id:this.item.id}})}}},a={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"e-vip-item",on:{click:t.handleClick}},[s("img",{directives:[{name:"lazy",rawName:"v-lazy",value:t.item.background,expression:"item.background"}],staticClass:"vip-background"}),t._v(" "),s("span",{staticClass:"name text-overflow"},[t._v(t._s(t.item.name))]),t._v(" "),s("span",{staticClass:"explain"},[t._v(t._s(t.item.freeCourseNum)+"门课程 "+t._s(t.item.freeClassroomNum)+"门班级")])])},staticRenderFns:[]},r={name:"e-vip-list",props:["items","feedback","sort","showTitle"],components:{vipItem:s("VU/8")(i,a,!1,null,null,null).exports}},n={render:function(){var s=this,t=s.$createElement,i=s._self._c||t;return i("div",{staticClass:"e-vip-list",class:s.items.length<=1?"single":""},["show"===s.showTitle?i("div",{staticClass:"e-vip-list__title text-18 mb20"},[s._v("会员专区")]):s._e(),s._v(" "),1<s.items.length?i("van-swipe",{attrs:{width:200,"show-indicators":!1,loop:!1,touchable:!0}},s._l(s.items,function(t,e){return i("van-swipe-item",{key:e},[i("vip-item",{attrs:{item:t,feedback:s.feedback}})],1)})):s._l(s.items,function(t,e){return i("vip-item",{key:e,staticClass:"single",attrs:{item:t,feedback:s.feedback}})})],2)},staticRenderFns:[]},o=s("VU/8")(r,n,!1,null,null,null);e.a=o.exports},l0Kp:function(t,e,s){"use strict";e.a={h5Setting:"h5",miniprogramSetting:"miniprogram"}},lAbm:function(t,e,s){"use strict";var i,a=s("gRE1"),r=s.n(a),n=s("xPBg"),o={props:{activity:{type:Object,default:{}}},data:function(){return{timer:null,counting:!0,seckillClass:"seckill-unstart",seckilling:!1,buyCountDownText:"",endCountDownText:""}},created:function(){this.countDownTime()},beforeDestroy:function(){this.clearInterval()},computed:{statusTitle:{get:function(){var t=this.activity.status;if("unstart"===t)return this.counting=!1,"秒杀未开始";if("closed"===t)return this.counting=!1,this.seckillClass="seckill-closed","秒杀已结束";if("ongoing"===t){if(!this.counting)return"秒杀已结束";if(0==this.activity.productRemaind)return this.counting=!1,this.seckillClass="seckill-closed",this.$emit("sellOut",!0),"商品已售空";var e=(new Date).getTime();if(this.startStamp<e&&e<this.endStamp)return this.seckilling=!0,this.counting=!0,this.seckillClass="seckill-ongoing",'距离结束仅剩<span class="ml10 mlm">'+this.endCountDownText+"</span>";if(this.startStamp>e)return this.seckilling=!1,this.counting=!0,this.seckillClass="seckill-unstart",'距离开抢<span class="ml10 mlm">'+this.buyCountDownText+"</span>"}},set:function(){}},startStamp:function(){return new Date(this.activity.startTime).getTime()},endStamp:function(){return new Date(this.activity.endTime).getTime()}},methods:{countDownTime:function(){var t=this;this.timer=setInterval(function(){t.endCountDownText=Object(n.dateTimeDown)(t.endStamp),t.buyCountDownText=Object(n.dateTimeDown)(t.startStamp),"已到期"==t.endCountDownText&&(t.seckillClass="seckill-closed",t.counting=!1,t.clearInterval(),t.$emit("timesUp"))},1e3)},clearInterval:(i=function(){clearInterval(this.timer),this.timer=null},c.toString=function(){return i.toString()},c)}};function c(){return i.apply(this,arguments)}var l={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{class:["seckill-countdown-container clearfix",t.seckillClass]},[s("span",{staticClass:"pull-left status-title"},[t._v("秒杀"+t._s("ongoing"===t.activity.status&&t.seckilling?"中":""))]),t._v(" "),s("div",{staticClass:"pull-right text-12",domProps:{innerHTML:t._s(t.statusTitle)}})])},staticRenderFns:[]};var u={components:{countDown:s("VU/8")(o,l,!1,function(t){s("hQlr")},null,null).exports},name:"e-groupon",props:{activity:{type:Object,default:{}},tag:{type:String,default:""},showTitle:{type:String,default:"show"},type:{type:String,default:"groupon"},feedback:{type:Boolean,default:!0}},data:function(){return{counting:!0,isEmpty:!1,bgGrey:!1}},computed:{activityData:function(){return!!r()(this.activity).length},activityId:function(){return Number(this.activity.id)},activityTitle:function(){return"seckill"===this.type?"秒杀":"cut"===this.type?"砍价":"拼团"},activityPrice:function(){return r()(this.activity).length?"seckill"===this.type?this.activity.rule.seckillPrice:"cut"===this.type?this.activity.rule.lowestPrice:"groupon"===this.type?this.activity.rule.ownerPrice:void 0:"00.00"},grouponStatus:function(){var t=this.activity.status;if("ongoing"===t&&!this.counting)return this.activity.status="closed",{seckill:"秒杀",cut:"砍价",groupon:"拼团"}[this.type]+"已结束";switch(this.type){case"groupon":if("unstart"===t)return"拼团未开始";if("ongoing"===t)return"去拼团";if("closed"===t)return"拼团已结束";break;case"seckill":if("unstart"===t)return"秒杀未开始";if("closed"===t)return"秒杀已结束";if("ongoing"===t){if(0==this.activity.productRemaind)return"商品已售空";var e=(new Date).getTime(),s=new Date(this.activity.startTime).getTime(),i=new Date(this.activity.endTime).getTime();if(s<e&&e<i)return"马上秒";if(e<s)return this.bgGrey=!0,"秒杀未开始"}break;case"cut":if("unstart"===t)return"砍价未开始";if("ongoing"===t)return"发起砍价";if("closed"===t)return"砍价已结束"}}},methods:{getMarketUrl:function(t){this.feedback&&this.$emit("activityHandle",this.activityId)},expire:function(){this.counting=!1},sellOut:function(){this.isEmpty=!0}}},p={render:function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"e-groupon",on:{click:function(t){e.getMarketUrl(e.activity.status)}}},["show"===e.showTitle?s("div",{staticClass:"e-coupon__title"},[e._v(e._s(e.activityTitle))]):e._e(),e._v(" "),s("div",{staticClass:"e-groupon__image-container",class:{"e-groupon__image-empty":!e.activity.cover}},[e.activity.cover?s("img",{directives:[{name:"lazy",rawName:"v-lazy",value:e.activity.cover,expression:"activity.cover"}],staticClass:"e-groupon__image",attrs:{alt:""}}):e._e(),e._v(" "),e.tag.length?s("div",{staticClass:"e-groupon__tag"},[e._v(e._s(e.tag))]):e._e()]),e._v(" "),e.activityData&&"seckill"===e.type&&e.counting&&!e.isEmpty&&"ongoing"===e.activity.status?s("countDown",{attrs:{activity:e.activity},on:{timesUp:e.expire,sellOut:e.sellOut}}):e._e(),e._v(" "),s("div",{staticClass:"e-groupon__context"},[s("div",{staticClass:"context-title text-overflow"},[e._v(e._s(e.activity.name||"活动名称"))]),e._v(" "),s("div",{staticClass:"context-sale clearfix"},["groupon"!==e.type?s("div",{staticClass:"type-tag"},[e._v(e._s("cut"===e.type?"砍价享":"秒杀价"))]):e._e(),e._v(" "),s("div",{staticClass:"context-sale__sale-price"},[e._v("￥"+e._s(e.activityPrice))]),e._v(" "),e.activity.originPrice?s("div",{staticClass:"context-sale__origin-price"},[e._v("原价￥"+e._s(e.activity.originPrice))]):e._e(),e._v(" "),s("a",{staticClass:"context-sale__shopping",class:[e.activity.status,{"bg-grey":e.isEmpty||e.bgGrey}],attrs:{href:"javascript:;"}},[e._v("\n        "+e._s(e.grouponStatus)+"\n      ")])])])],1)},staticRenderFns:[]},d=s("VU/8")(u,p,!1,null,null,null);e.a=d.exports},mbce:function(t,e,s){var c=s("lktj"),l=s("TcQ7"),u=s("NpIQ").f;t.exports=function(o){return function(t){for(var e,s=l(t),i=c(s),a=i.length,r=0,n=[];r<a;)u.call(s,e=i[r++])&&n.push(o?[e,s[e]]:s[e]);return n}}}});