webpackJsonp([13],{"8yuw":function(t,i){},SOOt:function(t,i,e){"use strict";Object.defineProperty(i,"__esModule",{value:!0});var s=e("Dd8w"),a=e.n(s),n=(e("eqfM"),e("/QYm")),r=e("Gu7T"),c=e.n(r),o=e("oHlh"),l=e("gyMJ"),u={components:{eCourse:o.a},data:function(){return{list:[],isFirstRequestCompile:!1,loading:!1,finished:!1,offset:0}},created:function(){},methods:{onLoad:function(){var s=this,t={offset:this.offset};l.a.getMyOrder({params:t}).then(function(t){var i=t.data,e=t.paging;s.isFirstRequestCompile=!0,s.list=[].concat(c()(s.list),c()(i)),s.offset=s.list.length,s.list.length==e.total&&(s.finished=!0),s.loading=!1}).catch(function(t){n.a.fail(t.message),s.isFirstRequestCompile=!0,s.loading=!1})}}},v={render:function(){var i=this,t=i.$createElement,e=i._self._c||t;return e("div",{staticClass:"orders"},[0===i.list.length&&i.isFirstRequestCompile?e("div",{staticClass:"orders-container__empty"},[e("img",{attrs:{src:"static/images/orderEmpty.png"}}),i._v(" "),e("span",[i._v("暂无订单记录")])]):e("div",{staticClass:"order"},[e("van-list",{staticClass:"tab-list",attrs:{finished:i.finished},on:{load:i.onLoad},model:{value:i.loading,callback:function(t){i.loading=t},expression:"loading"}},i._l(i.list,function(t){return e("e-course",{key:t.id,attrs:{order:t,type:"order",typeList:t.targetType}})}))],1)])},staticRenderFns:[]},d=e("VU/8")(u,v,!1,null,null,null).exports,p=e("NyOD"),g={cut:"砍价",groupon:"拼团",seckill:"秒杀"},_={cut:"砍",groupon:"团",seckill:"秒"},m={successed:"成功",ongoing:"中",failed:"失败"},f={name:"activity-item",props:{activity:{type:Object,default:function(){return{}}}},data:function(){return{type2symbol:_,type2label:g,status2label:m,activityId:Number(this.activity.activityId)}},mixins:[p.a],methods:{viewDetail:function(t){}}},h={render:function(){var i=this,t=i.$createElement,e=i._self._c||t;return e("div",{staticClass:"marketing-groupon activity-cell",on:{click:i.viewDetail}},[e("div",{staticClass:"activity-cell__head"},[e("span",{staticClass:"head-left",class:i.activity.type},[i._v(i._s(i.type2symbol[i.activity.type]))]),i._v(" "),e("span",{staticClass:"head-right",class:i.activity.status},[i._v(i._s(i.type2label[i.activity.type]+i.status2label[i.activity.status]))])]),i._v(" "),e("div",{staticClass:"activity-cell__body",on:{click:function(t){i.activityHandle(i.activityId)}}},[e("div",{staticClass:"marketing-groupon__image-container",class:{"marketing-groupon__image-empty":!i.activity.cover}},[i.activity.cover?e("img",{staticClass:"marketing-groupon__image",attrs:{src:i.activity.cover}}):i._e()]),i._v(" "),e("div",{staticClass:"marketing-groupon__context e-groupon__context"},[e("div",{staticClass:"context-title text-overflow"},[i._v(i._s(i.activity.name))]),i._v(" "),e("div",{staticClass:"context-sale"},[i.activity.price?e("span",{staticClass:"context-sale__sale-price"},[i._v(i._s(i.activity.price)+"元")]):i._e(),i._v(" "),i.activity.originPrice?e("span",{staticClass:"context-sale__origin-price"},[i._v(i._s(i.activity.originPrice)+"元")]):i._e(),i._v(" "),e("span",{staticClass:"context-sale__shopping"},[i._v(i._s(i.type2label[i.activity.type])+"详情")])])])])])},staticRenderFns:[]};var y={components:{activityItem:e("VU/8")(f,h,!1,function(t){e("8yuw")},"data-v-50ebb6cc",null).exports},data:function(){return{list:[],isFirstRequestCompile:!1,loading:!1,finished:!1,offset:0}},mounted:function(){this.onLoad()},methods:{onLoad:function(){var s=this,t={offset:this.offset};l.a.myActivities({params:t}).then(function(t){var i=t.data,e=t.paging;s.isFirstRequestCompile=!0,s.list=[].concat(c()(s.list),c()(i)),s.offset=s.list.length,s.list.length==e.total&&(s.finished=!0),s.loading=!1}).catch(function(t){n.a.fail(t.message),s.isFirstRequestCompile=!0,s.loading=!1})}}},C={render:function(){var i=this,t=i.$createElement,e=i._self._c||t;return e("div",{staticClass:"orders"},[0===i.list.length&&i.isFirstRequestCompile?e("div",{staticClass:"orders-container__empty"},[e("img",{attrs:{src:"static/images/orderEmpty.png"}}),i._v(" "),e("span",[i._v("暂无活动记录")])]):e("div",{staticClass:"activity"},[e("van-list",{staticClass:"tab-list",attrs:{finished:i.finished},on:{load:i.onLoad},model:{value:i.loading,callback:function(t){i.loading=t},expression:"loading"}},i._l(i.list,function(t,i){return e("activity-item",{key:i,attrs:{activity:t}})}))],1)])},staticRenderFns:[]},b=e("VU/8")(y,C,!1,null,null,null).exports,x=e("NYxO"),w={computed:a()({},Object(x.mapState)(["user","vipSwitch"]),{vipDated:function(){return!!this.user.vip&&new Date(this.user.vip.deadline).getTime()<(new Date).getTime()}}),created:function(){this.getUserInfo()},methods:a()({},Object(x.mapActions)(["getUserInfo"]))},D={render:function(){var t=this,i=t.$createElement,e=t._self._c||i;return e("div",{staticClass:"user"},[e("div",{staticClass:"user-section clearfix"},[e("router-link",{attrs:{to:"/settings"}},[t.user.avatar?e("img",{staticClass:"user-img",attrs:{src:t.user.avatar.large}}):t._e()]),t._v(" "),e("div",{class:["user-middle",t.vipSwitch?"":"single-middle"]},[e("div",{staticClass:"user-name"},[t._v(t._s(t.user.nickname))]),t._v(" "),t.vipSwitch?e("div",[t.user.vip?e("span",{staticClass:"user-vip"},[e("router-link",{attrs:{to:{path:"/vip",query:{id:t.user.vip.levelId}}}},[e("img",{class:["vip-img",t.vipDated?"vip-expired":""],attrs:{src:t.user.vip.icon}}),t._v(" "),t.vipDated?e("span",{staticClass:"grey text-overflow vip-name"},[t._v(t._s(t.user.vip.vipName)+"已过期，"),e("span",{staticClass:"color-primary"},[t._v("重新开通")])]):e("span",{staticClass:"color-primary"},[t._v(t._s(t.user.vip.vipName))])])],1):e("div",[e("router-link",{staticClass:"user-vip",attrs:{to:"/vip"}},[t._v("\n            您还不是会员，"),e("span",{staticClass:"color-primary"},[t._v("去开通")])])],1)]):t._e()]),t._v(" "),e("router-link",{staticClass:"user-setting",attrs:{to:"/settings"}},[e("img",{attrs:{src:"static/images/setting.png"}})])],1)])},staticRenderFns:[]},k=e("VU/8")(w,D,!1,null,null,null).exports,I={mixins:[e("vzuq").a],components:{Orders:d,activity:b,User:k},data:function(){return{activeIndex:0,tabs:["我的订单","我的活动"],hasBusinessDrainage:!1,isShowDistributorEntrance:!1,drpSetting:[]}},computed:a()({},Object(x.mapState)({isLoading:function(t){return t.isLoading}})),created:function(){var i=this;setTimeout(function(){window.scrollTo(0,0)},100),l.a.hasPluginInstalled().then(function(t){i.hasBusinessDrainage=t.BusinessDrainage}),this.showDistributorEntrance(),this.getDrpSetting()},methods:{showDistributorEntrance:function(){var i=this;l.a.hasDrpPluginInstalled().then(function(t){t.Drp?(l.a.getAgencyBindRelation().then(function(t){t.agencyId||(i.isShowDistributorEntrance=!1)}),i.isShowDistributorEntrance=!0):i.isShowDistributorEntrance=!1})},getDrpSetting:function(){var i=this;l.a.getDrpSetting().then(function(t){i.drpSetting=t})}}},S={render:function(){var i=this,t=i.$createElement,e=i._self._c||t;return e("div",[i.isLoading?e("e-loading"):i._e(),i._v(" "),e("user"),i._v(" "),e("router-link",{attrs:{to:{name:"couponCovert"}}},[i.hasBusinessDrainage?e("div",{staticClass:"coupon-code-entrance"},[i._v("兑换卡券\n      "),e("i",{staticClass:"van-icon van-icon-arrow pull-right"})]):i._e()]),i._v(" "),i.isShowDistributorEntrance?e("a",{attrs:{href:i.drpSetting.distributor_login_url}},[i._m(0)]):i._e(),i._v(" "),e("van-tabs",{staticClass:"after-tabs e-learn",model:{value:i.activeIndex,callback:function(t){i.activeIndex=t},expression:"activeIndex"}},i._l(i.tabs,function(t,i){return e("van-tab",{key:i,attrs:{title:t}})})),i._v(" "),e("orders",{directives:[{name:"show",rawName:"v-show",value:0===i.activeIndex,expression:"activeIndex === 0"}]}),i._v(" "),e("activity",{directives:[{name:"show",rawName:"v-show",value:1===i.activeIndex,expression:"activeIndex === 1"}]})],1)},staticRenderFns:[function(){var t=this.$createElement,i=this._self._c||t;return i("div",{staticClass:"coupon-code-entrance"},[this._v("分销中心\n      "),i("i",{staticClass:"van-icon van-icon-arrow pull-right"})])}]},E=e("VU/8")(I,S,!1,null,null,null);i.default=E.exports},vzuq:function(t,i,e){"use strict";var s=e("IcnI");i.a={beforeRouteEnter:function(t,i,e){!s.a.state.token?e({name:"prelogin",query:{redirect:t.fullPath}}):e()}}}});