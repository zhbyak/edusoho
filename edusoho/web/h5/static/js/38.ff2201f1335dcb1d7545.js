webpackJsonp([38],{jRbu:function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0});s("eqfM");var a=s("/QYm"),n=s("Dd8w"),i=s.n(n),r=s("gyMJ"),l=s("NYxO"),o=s("xPBg"),u={name:"testpaperIntro",mixins:[s("y1zP").a],data:function(){return{testpaper:null,testpaperTitle:"",info:{},startTime:null,limitTime:null,score:null,total:0,testId:null,targetId:null,counts:{},result:null,question_type_seq:[],answerName:null,timeName:null,answer:null,time:null,obj:{single_choice:"单选题",choice:"多选题",essay:"问答题",uncertain_choice:"不定项选择题",determine:"判断题",fill:"填空题",material:"材料题"}}},computed:i()({sum:function(){var t=0;for(var e in this.counts)t+=parseInt(this.counts[e]);return t},disabled:function(){var t=(new Date).getTime();return this.startTime>t}},Object(l.mapState)({isLoading:function(t){return t.isLoading},user:function(t){return t.user}})),created:function(){this.getInfo()},beforeRouteEnter:function(t,e,s){document.getElementById("app").style.background="#f6f6f6",s()},beforeRouteLeave:function(t,e,s){document.getElementById("app").style.background="",s()},methods:i()({},Object(l.mapActions)("course",["handExamdo"]),{getInfo:function(){var n=this;this.testId=this.$route.query.testId,this.targetId=this.$route.query.targetId,r.a.testpaperIntro({params:{targetId:this.targetId,targetType:"task"},query:{testId:this.testId}}).then(function(t){n.counts=t.items,n.testpaperTitle=t.task.title,n.testpaper=t.testpaper,n.result=t.testpaperResult,n.info=t.task.activity.testpaperInfo,n.score=n.testpaper.score,n.startTime=1e3*parseInt(n.info.startTime),n.limitTime=parseInt(n.info.limitTime),n.question_type_seq=n.testpaper.metas.question_type_seq,n.canDoing(n.result,n.user.id).then(function(){n.startTestpaper()}).catch(function(t){var e=t.answer,s=t.endTime;n.submitExam(e,s)})}).catch(function(t){a.a.fail(t.message)})},submitExam:function(t,e){var s=this;e=e||(new Date).getTime();var n={answer:t,resultId:this.result.id,userId:this.user.id,beginTime:Number(this.result.beginTime),endTime:e};this.handExamdo(n).then(function(t){s.showResult()}).catch(function(t){a.a.fail(t.message)})},startTestpaper:function(){this.$router.push({name:"testpaperDo",query:{testId:this.testId,targetId:this.targetId,title:this.testpaperTitle,action:"do"},params:{KeepDoing:!0}})},showResult:function(){this.$router.push({name:"testpaperResult",query:{resultId:this.result.id,testId:this.testId,targetId:this.targetId}})},formateStartTime:function(t){return t=Object(o.formatTime)(new Date(t))}})},c={render:function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",[e.isLoading?s("e-loading"):e._e(),e._v(" "),s("div",{staticClass:"intro-body"},[s("van-panel",{staticClass:"panel intro-panel",attrs:{title:"考试名称"}},[s("div",{staticClass:"intro-panel__content intro-panel__content--title"},[e._v(e._s(e.testpaperTitle))])]),e._v(" "),e.startTime?s("van-panel",{staticClass:"panel intro-panel",attrs:{title:"开考时间"}},[s("div",{class:["intro-panel__content",e.result||!e.disabled?"":"intro-tip"]},[e._v(e._s(e.formateStartTime(e.startTime)))])]):e._e(),e._v(" "),s("van-panel",{staticClass:"panel intro-panel",attrs:{title:"考试时长"}},[e.limitTime?s("div",{class:["intro-panel__content",e.result||!e.disabled?"":"intro-tip"]},[e._v(e._s(e.limitTime)+"分钟")]):s("div",{staticClass:"intro-panel__content"},[e._v("不限制")])]),e._v(" "),s("van-panel",{staticClass:"panel intro-panel",attrs:{title:"试卷满分"}},[s("div",{staticClass:"intro-panel__content"},[e._v("满分"+e._s(e.score)+"分")])]),e._v(" "),s("van-panel",{staticClass:"panel intro-panel",attrs:{title:"题目数量"}},[s("div",{staticClass:"intro-panel__content"},[s("van-cell",{staticClass:"intro-cell intro-cell--total",attrs:{border:!1,title:"共计",value:e.sum+"题"}}),e._v(" "),e._l(e.question_type_seq,function(t){return s("van-cell",{key:t,staticClass:"intro-cell",attrs:{border:!1,title:e.obj[t],value:e.counts[t]+"题"}})})],2)])],1),e._v(" "),s("div",{staticClass:"intro-footer"},[e.result?s("van-button",{staticClass:"intro-footer__btn",attrs:{type:"primary"},on:{click:e.showResult}},[e._v("查看成绩")]):s("van-button",{staticClass:"intro-footer__btn",attrs:{type:"primary",disabled:e.disabled},on:{click:function(t){e.startTestpaper()}}},[e._v("开始考试")])],1)],1)},staticRenderFns:[]},p=s("VU/8")(u,c,!1,null,null,null);e.default=p.exports}});