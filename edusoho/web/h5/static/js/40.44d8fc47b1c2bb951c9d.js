webpackJsonp([40],{pEIs:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=a("Xxa5"),n=a.n(i),r=a("//Fk"),s=a.n(r),u=(a("eqfM"),a("/QYm")),o=a("exGp"),d=a.n(o),c=a("Dd8w"),m=a.n(c),v=a("PirY"),l=a.n(v),p=a("gyMJ"),f=a("NYxO"),w=a("Du/2"),h={data:function(){return{media:"",isPreview:this.$route.query.preview}},computed:m()({},Object(f.mapState)("course",{details:function(e){return e.details},joinStatus:function(e){return e.joinStatus}}),Object(f.mapState)({isLoading:function(e){return e.isLoading}})),mounted:function(){var a=this;return d()(n.a.mark(function e(){var t;return n.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,p.a.getMedia(a.getParams()).catch(function(e){return Object(u.a)(e.message),s.a.reject(e)});case 2:t=e.sent,["ppt","doc"].includes(a.media)?a.initPlayer(t):(a.$refs.text.innerHTML=t.media.content,a.setNavbarTitle(t.media.title));case 4:case"end":return e.stop()}},e,a)}))()},methods:m()({},Object(f.mapMutations)({setNavbarTitle:w.k}),{getParams:function(){var e=this.$route.query,t=e.courseId,a=e.taskId,i=e.type,n=!this.joinStatus&&this.isPreview;return this.media=i,n?{query:{courseId:t,taskId:a},params:{preview:1}}:{query:{courseId:t,taskId:a}}},initPlayer:function(t){var a=t.media,e="//service-cdn.qiqiuyun.net/js-sdk/sdk-v1.js?v="+Date.now()/1e3/60;l()(e,function(e){if(e)throw e;new window.QiQiuYun.Player({id:"player",resNo:a.resId,token:a.token,source:{type:t.mediaType,args:a}})})}})},x={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"web-view"},[e.isLoading?a("e-loading"):e._e(),e._v(" "),a("div",{directives:[{name:"show",rawName:"v-show",value:"text"!==e.media,expression:"media !== 'text'"}],attrs:{id:"player"}}),e._v(" "),a("div",{directives:[{name:"show",rawName:"v-show",value:"text"===e.media,expression:"media === 'text'"}],ref:"text",staticClass:"media-text"})],1)},staticRenderFns:[]},y=a("VU/8")(h,x,!1,null,null,null);t.default=y.exports}});